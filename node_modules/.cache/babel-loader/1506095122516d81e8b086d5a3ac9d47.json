{"remainingRequest":"G:\\code21\\ruoyi\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js!G:\\code21\\ruoyi\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\code21\\ruoyi\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\code21\\ruoyi\\ruoyi-ui\\src\\views\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"G:\\code21\\ruoyi\\ruoyi-ui\\src\\views\\login.vue","mtime":1645092930168},{"path":"G:\\code21\\ruoyi\\ruoyi-ui\\babel.config.js","mtime":1615086407000},{"path":"G:\\code21\\ruoyi\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645088178179},{"path":"G:\\code21\\ruoyi\\ruoyi-ui\\node_modules\\babel-loader\\lib\\index.js","mtime":1645088179499},{"path":"G:\\code21\\ruoyi\\ruoyi-ui\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1645088178179},{"path":"G:\\code21\\ruoyi\\ruoyi-ui\\node_modules\\vue-loader\\lib\\index.js","mtime":1645088184792}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCJHOi9jb2RlMjEvcnVveWkvcnVveWktdWkvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvaW50ZXJvcFJlcXVpcmVEZWZhdWx0LmpzIikuZGVmYXVsdDsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwOwoKdmFyIF9sb2dpbiA9IHJlcXVpcmUoIkAvYXBpL2xvZ2luIik7Cgp2YXIgX2pzQ29va2llID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJqcy1jb29raWUiKSk7Cgp2YXIgX2pzZW5jcnlwdCA9IHJlcXVpcmUoIkAvdXRpbHMvanNlbmNyeXB0Iik7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogIkxvZ2luIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29kZVVybDogIiIsCiAgICAgIGNvb2tpZVBhc3N3b3JkOiAiIiwKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICJhZG1pbiIsCiAgICAgICAgcGFzc3dvcmQ6ICJhZG1pbjEyMyIsCiAgICAgICAgcmVtZW1iZXJNZTogZmFsc2UsCiAgICAgICAgY29kZTogIiIsCiAgICAgICAgdXVpZDogIiIKICAgICAgfSwKICAgICAgbG9naW5SdWxlczogewogICAgICAgIHVzZXJuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICBtZXNzYWdlOiAi55So5oi35ZCN5LiN6IO95Li656m6IgogICAgICAgIH1dLAogICAgICAgIHBhc3N3b3JkOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICBtZXNzYWdlOiAi5a+G56CB5LiN6IO95Li656m6IgogICAgICAgIH1dLAogICAgICAgIGNvZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIHRyaWdnZXI6ICJjaGFuZ2UiLAogICAgICAgICAgbWVzc2FnZTogIumqjOivgeeggeS4jeiDveS4uuepuiIKICAgICAgICB9XQogICAgICB9LAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcmVkaXJlY3Q6IHVuZGVmaW5lZAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAkcm91dGU6IHsKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihyb3V0ZSkgewogICAgICAgIHRoaXMucmVkaXJlY3QgPSByb3V0ZS5xdWVyeSAmJiByb3V0ZS5xdWVyeS5yZWRpcmVjdDsKICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRDb2RlKCk7CiAgICB0aGlzLmdldENvb2tpZSgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Q29kZTogZnVuY3Rpb24gZ2V0Q29kZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgICgwLCBfbG9naW4uZ2V0Q29kZUltZykoKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpcy5jb2RlVXJsID0gImRhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCwiICsgcmVzLmltZzsKICAgICAgICBfdGhpcy5sb2dpbkZvcm0udXVpZCA9IHJlcy51dWlkOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRDb29raWU6IGZ1bmN0aW9uIGdldENvb2tpZSgpIHsKICAgICAgdmFyIHVzZXJuYW1lID0gX2pzQ29va2llLmRlZmF1bHQuZ2V0KCJ1c2VybmFtZSIpOwoKICAgICAgdmFyIHBhc3N3b3JkID0gX2pzQ29va2llLmRlZmF1bHQuZ2V0KCJwYXNzd29yZCIpOwoKICAgICAgdmFyIHJlbWVtYmVyTWUgPSBfanNDb29raWUuZGVmYXVsdC5nZXQoJ3JlbWVtYmVyTWUnKTsKCiAgICAgIHRoaXMubG9naW5Gb3JtID0gewogICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSA9PT0gdW5kZWZpbmVkID8gdGhpcy5sb2dpbkZvcm0udXNlcm5hbWUgOiB1c2VybmFtZSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubG9naW5Gb3JtLnBhc3N3b3JkIDogKDAsIF9qc2VuY3J5cHQuZGVjcnlwdCkocGFzc3dvcmQpLAogICAgICAgIHJlbWVtYmVyTWU6IHJlbWVtYmVyTWUgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogQm9vbGVhbihyZW1lbWJlck1lKQogICAgICB9OwogICAgfSwKICAgIGhhbmRsZUxvZ2luOiBmdW5jdGlvbiBoYW5kbGVMb2dpbigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLiRyZWZzLmxvZ2luRm9ybS52YWxpZGF0ZShmdW5jdGlvbiAodmFsaWQpIHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gdHJ1ZTsKCiAgICAgICAgICBpZiAoX3RoaXMyLmxvZ2luRm9ybS5yZW1lbWJlck1lKSB7CiAgICAgICAgICAgIF9qc0Nvb2tpZS5kZWZhdWx0LnNldCgidXNlcm5hbWUiLCBfdGhpczIubG9naW5Gb3JtLnVzZXJuYW1lLCB7CiAgICAgICAgICAgICAgZXhwaXJlczogMzAKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfanNDb29raWUuZGVmYXVsdC5zZXQoInBhc3N3b3JkIiwgKDAsIF9qc2VuY3J5cHQuZW5jcnlwdCkoX3RoaXMyLmxvZ2luRm9ybS5wYXNzd29yZCksIHsKICAgICAgICAgICAgICBleHBpcmVzOiAzMAogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIF9qc0Nvb2tpZS5kZWZhdWx0LnNldCgncmVtZW1iZXJNZScsIF90aGlzMi5sb2dpbkZvcm0ucmVtZW1iZXJNZSwgewogICAgICAgICAgICAgIGV4cGlyZXM6IDMwCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgX2pzQ29va2llLmRlZmF1bHQucmVtb3ZlKCJ1c2VybmFtZSIpOwoKICAgICAgICAgICAgX2pzQ29va2llLmRlZmF1bHQucmVtb3ZlKCJwYXNzd29yZCIpOwoKICAgICAgICAgICAgX2pzQ29va2llLmRlZmF1bHQucmVtb3ZlKCdyZW1lbWJlck1lJyk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgiTG9naW4iLCBfdGhpczIubG9naW5Gb3JtKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgcGF0aDogX3RoaXMyLnJlZGlyZWN0IHx8ICIvIgogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7fSk7CiAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIF90aGlzMi5sb2FkaW5nID0gZmFsc2U7CgogICAgICAgICAgICBfdGhpczIuZ2V0Q29kZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"mappings":"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","names":["name","data","codeUrl","cookiePassword","loginForm","username","password","rememberMe","code","uuid","loginRules","required","trigger","message","loading","redirect","undefined","watch","$route","handler","route","query","immediate","created","getCode","getCookie","methods","then","res","img","Cookies","get","Boolean","handleLogin","$refs","validate","valid","set","expires","remove","$store","dispatch","$router","push","path","catch"],"sourceRoot":"src/views","sources":["G:/code21/ruoyi/ruoyi-ui/src/views/login.vue"],"sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { getCodeImg } from \"@/api/login\";\nimport Cookies from \"js-cookie\";\nimport { encrypt, decrypt } from '@/utils/jsencrypt'\n\nexport default {\n  name: \"Login\",\n  data() {\n    return {\n      codeUrl: \"\",\n      cookiePassword: \"\",\n      loginForm: {\n        username: \"admin\",\n        password: \"admin123\",\n        rememberMe: false,\n        code: \"\",\n        uuid: \"\"\n      },\n      loginRules: {\n        username: [\n          { required: true, trigger: \"blur\", message: \"用户名不能为空\" }\n        ],\n        password: [\n          { required: true, trigger: \"blur\", message: \"密码不能为空\" }\n        ],\n        code: [{ required: true, trigger: \"change\", message: \"验证码不能为空\" }]\n      },\n      loading: false,\n      redirect: undefined\n    };\n  },\n  watch: {\n    $route: {\n      handler: function(route) {\n        this.redirect = route.query && route.query.redirect;\n      },\n      immediate: true\n    }\n  },\n  created() {\n    this.getCode();\n    this.getCookie();\n  },\n  methods: {\n    getCode() {\n      getCodeImg().then(res => {\n        this.codeUrl = \"data:image/gif;base64,\" + res.img;\n        this.loginForm.uuid = res.uuid;\n      });\n    },\n    getCookie() {\n      const username = Cookies.get(\"username\");\n      const password = Cookies.get(\"password\");\n      const rememberMe = Cookies.get('rememberMe')\n      this.loginForm = {\n        username: username === undefined ? this.loginForm.username : username,\n        password: password === undefined ? this.loginForm.password : decrypt(password),\n        rememberMe: rememberMe === undefined ? false : Boolean(rememberMe)\n      };\n    },\n    handleLogin() {\n      this.$refs.loginForm.validate(valid => {\n        if (valid) {\n          this.loading = true;\n          if (this.loginForm.rememberMe) {\n            Cookies.set(\"username\", this.loginForm.username, { expires: 30 });\n            Cookies.set(\"password\", encrypt(this.loginForm.password), { expires: 30 });\n            Cookies.set('rememberMe', this.loginForm.rememberMe, { expires: 30 });\n          } else {\n            Cookies.remove(\"username\");\n            Cookies.remove(\"password\");\n            Cookies.remove('rememberMe');\n          }\n          this.$store.dispatch(\"Login\", this.loginForm).then(() => {\n            this.$router.push({ path: this.redirect || \"/\" }).catch(()=>{});\n          }).catch(() => {\n            this.loading = false;\n            this.getCode();\n          });\n        }\n      });\n    }\n  }\n};\n"]}]}